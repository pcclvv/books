



<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="笔记">
      
      
      
        <meta name="author" content="流浪地球">
      
      
        <meta name="lang:clipboard.copy" content="复制">
      
        <meta name="lang:clipboard.copied" content="已复制">
      
        <meta name="lang:search.language" content="jp">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="没有找到符合条件的结果">
      
        <meta name="lang:search.result.one" content="找到 1 个符合条件的结果">
      
        <meta name="lang:search.result.other" content="# 个符合条件的结果">
      
        <meta name="lang:search.tokenizer" content="[\uff0c\u3002]+">
      
      <link rel="shortcut icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.3.0">
    
    
      
        <title>1. redis-sentinel - 笔记</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/application.572ca0f0.css">
      
        <link rel="stylesheet" href="../../../../assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="#546e7a">
      
    
    
      <script src="../../../../assets/javascripts/modernizr.962652e9.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue-grey" data-md-color-accent="pink">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#1" tabindex="1" class="md-skip">
        跳转至
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../../.." title="笔记" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                笔记
              </span>
              <span class="md-header-nav__topic">
                1. redis-sentinel
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            键入以开始搜索
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/caimengzhi/books/" title="前往 Github 仓库" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      caimengzhi/books
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../../.." title="笔记" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    笔记
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/caimengzhi/books/" title="前往 Github 仓库" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      caimengzhi/books
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      Python
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        Python
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-1" type="checkbox" id="nav-1-1">
    
    <label class="md-nav__link" for="nav-1-1">
      库学习
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-1-1">
        库学习
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-1-1" type="checkbox" id="nav-1-1-1">
    
    <label class="md-nav__link" for="nav-1-1-1">
      1. SQLAlchemy库
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-1-1-1">
        1. SQLAlchemy库
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../python/lib/SQLAlchemy/1.创建表/" title="1. 创建表" class="md-nav__link">
      1. 创建表
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../python/lib/SQLAlchemy/2.基本操作/" title="2. 基本操作" class="md-nav__link">
      2. 基本操作
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../python/lib/SQLAlchemy/3.回滚/" title="3. 回滚" class="md-nav__link">
      3. 回滚
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../python/lib/SQLAlchemy/4.统计分组/" title="4. 统计分组" class="md-nav__link">
      4. 统计分组
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../python/lib/SQLAlchemy/5.外键/" title="5. 外键" class="md-nav__link">
      5. 外键
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../python/lib/SQLAlchemy/6.关系定义/" title="6. 关系定义" class="md-nav__link">
      6. 关系定义
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-1-2" type="checkbox" id="nav-1-1-2">
    
    <label class="md-nav__link" for="nav-1-1-2">
      2. YAML库
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-1-1-2">
        2. YAML库
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../python/lib/yaml/1.yaml语法/" title="1. yaml语法" class="md-nav__link">
      1. yaml语法
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../python/lib/yaml/2.yaml使用/" title="2. yaml使用" class="md-nav__link">
      2. yaml使用
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-1-3" type="checkbox" id="nav-1-1-3">
    
    <label class="md-nav__link" for="nav-1-1-3">
      3. sh库
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-1-1-3">
        3. sh库
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../python/lib/sh/1.sh/" title="1. sh使用" class="md-nav__link">
      1. sh使用
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-1-4" type="checkbox" id="nav-1-1-4">
    
    <label class="md-nav__link" for="nav-1-1-4">
      4. excel库
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-1-1-4">
        4. excel库
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../python/lib/execel/1.xlrd_xlwt/" title="1. xlrd_xlwt" class="md-nav__link">
      1. xlrd_xlwt
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../python/lib/execel/2.openpyxl/" title="2. openpyxl" class="md-nav__link">
      2. openpyxl
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-1-5" type="checkbox" id="nav-1-1-5">
    
    <label class="md-nav__link" for="nav-1-1-5">
      5. 加解密库
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-1-1-5">
        5. 加解密库
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../python/lib/encryption_decryption/base64/1.base64使用/" title="1. base4" class="md-nav__link">
      1. base4
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../python/lib/encryption_decryption/base64/2.案例/" title="2. 加解密execl表" class="md-nav__link">
      2. 加解密execl表
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-1-6" type="checkbox" id="nav-1-1-6">
    
    <label class="md-nav__link" for="nav-1-1-6">
      6. 邮件库
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-1-1-6">
        6. 邮件库
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../python/lib/email/smtp/1.s/" title="1. 单人接受文件" class="md-nav__link">
      1. 单人接受文件
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../python/lib/email/smtp/2.d/" title="2. 多人接受文件" class="md-nav__link">
      2. 多人接受文件
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-1-7" type="checkbox" id="nav-1-1-7">
    
    <label class="md-nav__link" for="nav-1-1-7">
      7. wordcloud库
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-1-1-7">
        7. wordcloud库
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../python/lib/wordcloud/1.wordcloud/" title="1. wordcloud" class="md-nav__link">
      1. wordcloud
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-1-8" type="checkbox" id="nav-1-1-8">
    
    <label class="md-nav__link" for="nav-1-1-8">
      8. yield库
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-1-1-8">
        8. yield库
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../python/lib/yield/1.yield/" title="1. yield" class="md-nav__link">
      1. yield
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-1-9" type="checkbox" id="nav-1-1-9">
    
    <label class="md-nav__link" for="nav-1-1-9">
      9. Nosql
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-1-1-9">
        9. Nosql
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-1-9-1" type="checkbox" id="nav-1-1-9-1">
    
    <label class="md-nav__link" for="nav-1-1-9-1">
      1. mongo
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-1-1-9-1">
        1. mongo
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../python/lib/nosql/mongo/mongo.index/" title="1. mongo" class="md-nav__link">
      1. mongo
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-1-9-2" type="checkbox" id="nav-1-1-9-2">
    
    <label class="md-nav__link" for="nav-1-1-9-2">
      2. memcached
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-1-1-9-2">
        2. memcached
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../python/lib/nosql/memcached/memcached.index/" title="1. memcached" class="md-nav__link">
      1. memcached
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-1-9-3" type="checkbox" id="nav-1-1-9-3">
    
    <label class="md-nav__link" for="nav-1-1-9-3">
      3. redis
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-1-1-9-3">
        3. redis
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../python/lib/nosql/redis/redis.index/" title="1. redis" class="md-nav__link">
      1. redis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../python/lib/nosql/redis/redis.pipeline/" title="2. redis pipeline" class="md-nav__link">
      2. redis pipeline
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../python/lib/nosql/redis/redis.transaction/" title="3. redis transaction" class="md-nav__link">
      3. redis transaction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../python/lib/nosql/redis/redis.pub_sub/" title="4. redis pub_sub" class="md-nav__link">
      4. redis pub_sub
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../python/lib/nosql/redis/redis.sentinel/" title="5. redis sentinel" class="md-nav__link">
      5. redis sentinel
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-1-10" type="checkbox" id="nav-1-1-10">
    
    <label class="md-nav__link" for="nav-1-1-10">
      10. 数据处理库
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-1-1-10">
        10. 数据处理库
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-1-10-1" type="checkbox" id="nav-1-1-10-1">
    
    <label class="md-nav__link" for="nav-1-1-10-1">
      1. numPy
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-1-1-10-1">
        1. numPy
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../python/lib/numPy/1.index/" title="1. 介绍" class="md-nav__link">
      1. 介绍
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-1-10-2" type="checkbox" id="nav-1-1-10-2">
    
    <label class="md-nav__link" for="nav-1-1-10-2">
      2. pandas
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-1-1-10-2">
        2. pandas
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../python/lib/pandas/1.index/" title="1. 介绍" class="md-nav__link">
      1. 介绍
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-1-11" type="checkbox" id="nav-1-1-11">
    
    <label class="md-nav__link" for="nav-1-1-11">
      11. uuid
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-1-1-11">
        11. uuid
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../python/lib/uuid/uuid.index/" title="1. uuid" class="md-nav__link">
      1. uuid
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-1-12" type="checkbox" id="nav-1-1-12">
    
    <label class="md-nav__link" for="nav-1-1-12">
      12. LRU
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-1-1-12">
        12. LRU
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../python/lib/LRU/LRU.index/" title="1. LRU" class="md-nav__link">
      1. LRU
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Linux
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Linux
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-1" type="checkbox" id="nav-2-1">
    
    <label class="md-nav__link" for="nav-2-1">
      小工具
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-1">
        小工具
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../sersync/sersync/" title="1. sersync" class="md-nav__link">
      1. sersync
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../tools/elinks/1.index/" title="2. elinks" class="md-nav__link">
      2. elinks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../tools/script_scriptreplay/1.index/" title="3. Linux终端录屏和回放" class="md-nav__link">
      3. Linux终端录屏和回放
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      服务
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        服务
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2-1" type="checkbox" id="nav-2-2-1">
    
    <label class="md-nav__link" for="nav-2-2-1">
      1. Harbor
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-2-2-1">
        1. Harbor
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../harbor/harbor.index/" title="1. Harbor" class="md-nav__link">
      1. Harbor
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2-2" type="checkbox" id="nav-2-2-2">
    
    <label class="md-nav__link" for="nav-2-2-2">
      2. PPPOE
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-2-2-2">
        2. PPPOE
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../pppoe/pppoe.index/" title="1. PPPOE" class="md-nav__link">
      1. PPPOE
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy_django/deploy_django.index/" title="3. django项目部署" class="md-nav__link">
      3. django项目部署
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-3" type="checkbox" id="nav-2-3">
    
    <label class="md-nav__link" for="nav-2-3">
      证书
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-3">
        证书
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-3-1" type="checkbox" id="nav-2-3-1">
    
    <label class="md-nav__link" for="nav-2-3-1">
      1. Tomcat
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-2-3-1">
        1. Tomcat
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../certificate/tomcat.index/" title="1. Tomcat" class="md-nav__link">
      1. Tomcat
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      前端
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        前端
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../frontend/vue/" title="Vue" class="md-nav__link">
      Vue
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      服务
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        服务
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1" type="checkbox" id="nav-4-1">
    
    <label class="md-nav__link" for="nav-4-1">
      1. git
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-1">
        1. git
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../tools/git/1.git/" title="1. git" class="md-nav__link">
      1. git
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../tools/git/2.git_rollback/" title="2. git回滚" class="md-nav__link">
      2. git回滚
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../tools/git/3.git_branch/" title="3. git分支" class="md-nav__link">
      3. git分支
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../tools/git/4.git_lab/" title="4. git 标签" class="md-nav__link">
      4. git 标签
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../tools/github/1.github/" title="2. github" class="md-nav__link">
      2. github
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      3. gitlab
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        3. gitlab
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../tools/gitlab/1.gitlab/" title="1. gitlab" class="md-nav__link">
      1. gitlab
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../tools/gitlab/2.gitlab_close_register/" title="2. 关闭注册" class="md-nav__link">
      2. 关闭注册
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../tools/gitlab/3.set_root_pwd/" title="3. 找回root密码" class="md-nav__link">
      3. 找回root密码
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-4" type="checkbox" id="nav-4-4" checked>
    
    <label class="md-nav__link" for="nav-4-4">
      4. nosql
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-4">
        4. nosql
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-4-1" type="checkbox" id="nav-4-4-1" checked>
    
    <label class="md-nav__link" for="nav-4-4-1">
      1. redis
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-4-1">
        1. redis
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        1. redis-sentinel
      </label>
    
    <a href="./" title="1. redis-sentinel" class="md-nav__link md-nav__link--active">
      1. redis-sentinel
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1" title="1. 介绍" class="md-nav__link">
    1. 介绍
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11" title="1.1 优势" class="md-nav__link">
    1.1 优势
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12" title="1.2 比较" class="md-nav__link">
    1.2 比较
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-redis-sentinel" title="2. redis sentinel 介绍" class="md-nav__link">
    2. redis sentinel 介绍
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-sentinel" title="2.1 Sentinel是什么" class="md-nav__link">
    2.1 Sentinel是什么
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-sentinel" title="2.2 开多少个Sentinel合适" class="md-nav__link">
    2.2 开多少个Sentinel合适
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-sentinelmaster" title="2.3 Sentinel判断master下线的两种标准" class="md-nav__link">
    2.3 Sentinel判断master下线的两种标准
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" title="3. 准备" class="md-nav__link">
    3. 准备
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" title="3.1 条件" class="md-nav__link">
    3.1 条件
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32" title="3.2 配置" class="md-nav__link">
    3.2 配置
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#321-ip" title="3.2.1 ip地址" class="md-nav__link">
    3.2.1 ip地址
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#322" title="3.2.2 下线阀值" class="md-nav__link">
    3.2.2 下线阀值
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#323-slave" title="3.2.3 slave个数" class="md-nav__link">
    3.2.3 slave个数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#323" title="3.2.3 恢复时长" class="md-nav__link">
    3.2.3 恢复时长
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-redis-sentinel" title="4. redis sentinel" class="md-nav__link">
    4. redis sentinel
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41" title="4.1 环境准备" class="md-nav__link">
    4.1 环境准备
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42" title="4.2 操作流程" class="md-nav__link">
    4.2 操作流程
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43" title="4.3 拓扑演变" class="md-nav__link">
    4.3 拓扑演变
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#431" title="4.3.1 开始模式" class="md-nav__link">
    4.3.1 开始模式
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#432-master" title="4.3.2 master宕机" class="md-nav__link">
    4.3.2 master宕机
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#433-master" title="4.3.3 master修复后" class="md-nav__link">
    4.3.3 master修复后
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44" title="4.4 启动镜像" class="md-nav__link">
    4.4 启动镜像
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#452-tcl" title="4.5.2 安装tcl 包" class="md-nav__link">
    4.5.2 安装tcl 包
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#453-redis" title="4.5.3 安装redis" class="md-nav__link">
    4.5.3 安装redis
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#46" title="4.6 配置主从" class="md-nav__link">
    4.6 配置主从
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#461" title="4.6.1 主从配置" class="md-nav__link">
    4.6.1 主从配置
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#47" title="4.7 启动" class="md-nav__link">
    4.7 启动
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#471" title="4.7.1 启动" class="md-nav__link">
    4.7.1 启动
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#472" title="4.7.2 停止" class="md-nav__link">
    4.7.2 停止
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#48" title="4.8 测试主从" class="md-nav__link">
    4.8 测试主从
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#481" title="4.8.1 主上设置一个键值对" class="md-nav__link">
    4.8.1 主上设置一个键值对
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#482-redis-slave1" title="4.8.2 Redis slave1查看" class="md-nav__link">
    4.8.2 Redis slave1查看
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#482-redis-slave2" title="4.8.2 Redis slave2查看" class="md-nav__link">
    4.8.2 Redis slave2查看
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#48-sentinel" title="4.8 配置sentinel" class="md-nav__link">
    4.8 配置sentinel
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#481-sentinel" title="4.8.1 配置sentinel" class="md-nav__link">
    4.8.1 配置sentinel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#482-sentinel" title="4.8.2 启动 sentinel" class="md-nav__link">
    4.8.2 启动 sentinel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#483" title="4.8.3 查看" class="md-nav__link">
    4.8.3 查看
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#49" title="4.9 故障模拟" class="md-nav__link">
    4.9 故障模拟
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#491-master" title="4.9.1 master宕机" class="md-nav__link">
    4.9.1 master宕机
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#492-redis" title="4.9.2 查看redis主从情况" class="md-nav__link">
    4.9.2 查看redis主从情况
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#493-sentinel" title="4.9.3 查看sentinel情况" class="md-nav__link">
    4.9.3 查看sentinel情况
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      教程
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        教程
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../course/" title="教程" class="md-nav__link">
      教程
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      测试
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        测试
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-1" type="checkbox" id="nav-6-1">
    
    <label class="md-nav__link" for="nav-6-1">
      服务
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-1">
        服务
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-1-1" type="checkbox" id="nav-6-1-1">
    
    <label class="md-nav__link" for="nav-6-1-1">
      mkdocs 服务
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-6-1-1">
        mkdocs 服务
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../.." title="一. 介绍" class="md-nav__link">
      一. 介绍
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-1-1-2" type="checkbox" id="nav-6-1-1-2">
    
    <label class="md-nav__link" for="nav-6-1-1-2">
      二. 安装
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-6-1-1-2">
        二. 安装
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../install/local/" title="1. 本地环境搭建" class="md-nav__link">
      1. 本地环境搭建
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../install/github-pages/" title="2. 发布至GitHub Pages" class="md-nav__link">
      2. 发布至GitHub Pages
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../install/http-server/" title="3. 发布至自己的HTTP Server" class="md-nav__link">
      3. 发布至自己的HTTP Server
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-1-1-3" type="checkbox" id="nav-6-1-1-3">
    
    <label class="md-nav__link" for="nav-6-1-1-3">
      三. 语法
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-6-1-1-3">
        三. 语法
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/main/" title="1. 语法总览" class="md-nav__link">
      1. 语法总览
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/headline/" title="2. 标题" class="md-nav__link">
      2. 标题
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/paragraph/" title="3. 段落" class="md-nav__link">
      3. 段落
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/quote/" title="4. 引用" class="md-nav__link">
      4. 引用
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/table/" title="5. 表格" class="md-nav__link">
      5. 表格
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-1-1-3-6" type="checkbox" id="nav-6-1-1-3-6">
    
    <label class="md-nav__link" for="nav-6-1-1-3-6">
      6. 代码
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-6-1-1-3-6">
        6. 代码
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/code_inline/" title="6.1. 行内" class="md-nav__link">
      6.1. 行内
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/code_block/" title="6.2. 区块" class="md-nav__link">
      6.2. 区块
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/code_highlight/" title="6.3. 高亮" class="md-nav__link">
      6.3. 高亮
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-1-1-3-7" type="checkbox" id="nav-6-1-1-3-7">
    
    <label class="md-nav__link" for="nav-6-1-1-3-7">
      7. 字体样式
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-6-1-1-3-7">
        7. 字体样式
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/font_stress/" title="7.1. 斜体,粗体,粗斜体" class="md-nav__link">
      7.1. 斜体,粗体,粗斜体
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/font_updown/" title="7.2. 上标,下标" class="md-nav__link">
      7.2. 上标,下标
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/font_underline/" title="7.3. 下划线" class="md-nav__link">
      7.3. 下划线
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/font_line/" title="7.4. 横线" class="md-nav__link">
      7.4. 横线
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/font_underline_line/" title="7.5. 下划线+横线" class="md-nav__link">
      7.5. 下划线+横线
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-1-1-3-8" type="checkbox" id="nav-6-1-1-3-8">
    
    <label class="md-nav__link" for="nav-6-1-1-3-8">
      8. 列表
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-6-1-1-3-8">
        8. 列表
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/list_noseq/" title="8.1. 无序列表" class="md-nav__link">
      8.1. 无序列表
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/list_seq/" title="8.2. 有序列表" class="md-nav__link">
      8.2. 有序列表
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/list_task/" title="8.3. 任务列表" class="md-nav__link">
      8.3. 任务列表
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/cutline/" title="9. 分割线" class="md-nav__link">
      9. 分割线
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-1-1-3-10" type="checkbox" id="nav-6-1-1-3-10">
    
    <label class="md-nav__link" for="nav-6-1-1-3-10">
      10. 链接
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-6-1-1-3-10">
        10. 链接
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/link_normal/" title="10.1. 普通链接" class="md-nav__link">
      10.1. 普通链接
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/link_auto/" title="10.2. 自动链接" class="md-nav__link">
      10.2. 自动链接
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/link_anchor/" title="10.3. 锚点提示" class="md-nav__link">
      10.3. 锚点提示
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-1-1-3-11" type="checkbox" id="nav-6-1-1-3-11">
    
    <label class="md-nav__link" for="nav-6-1-1-3-11">
      11. 图片
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-6-1-1-3-11">
        11. 图片
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/image_inline/" title="11.1. 行内式" class="md-nav__link">
      11.1. 行内式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/image_index/" title="11.2. 参考式" class="md-nav__link">
      11.2. 参考式
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/escape/" title="12. 转义" class="md-nav__link">
      12. 转义
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-1-1-3-13" type="checkbox" id="nav-6-1-1-3-13">
    
    <label class="md-nav__link" for="nav-6-1-1-3-13">
      13. 高亮
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-6-1-1-3-13">
        13. 高亮
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/highlight_code/" title="13.1. 代码高亮" class="md-nav__link">
      13.1. 代码高亮
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/highlight_background/" title="13.2. 背景高亮" class="md-nav__link">
      13.2. 背景高亮
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-1-1-3-14" type="checkbox" id="nav-6-1-1-3-14">
    
    <label class="md-nav__link" for="nav-6-1-1-3-14">
      14. 注解
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-6-1-1-3-14">
        14. 注解
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/note_main/" title="14.1. 介绍" class="md-nav__link">
      14.1. 介绍
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/note_full/" title="14.2. 完整格式" class="md-nav__link">
      14.2. 完整格式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/note_empty-title/" title="14.3. 空标题" class="md-nav__link">
      14.3. 空标题
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/note_none-title/" title="14.4. 无标题" class="md-nav__link">
      14.4. 无标题
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/note_none-type/" title="14.5. 无类型" class="md-nav__link">
      14.5. 无类型
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/note_details/" title="14.6. 折叠" class="md-nav__link">
      14.6. 折叠
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/note_style/" title="14.7. 11种颜色样式" class="md-nav__link">
      14.7. 11种颜色样式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/note_nest/" title="14.8. 嵌套" class="md-nav__link">
      14.8. 嵌套
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/footnote/" title="15. 脚注" class="md-nav__link">
      15. 脚注
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/meta/" title="16. 元信息" class="md-nav__link">
      16. 元信息
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-1-1-3-17" type="checkbox" id="nav-6-1-1-3-17">
    
    <label class="md-nav__link" for="nav-6-1-1-3-17">
      17. 数学公式
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-6-1-1-3-17">
        17. 数学公式
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/math_main/" title="17.1. 介绍" class="md-nav__link">
      17.1. 介绍
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/math_js/" title="17.2. 导入js" class="md-nav__link">
      17.2. 导入js
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/math_usage/" title="17.3. 用法" class="md-nav__link">
      17.3. 用法
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-1-1-3-18" type="checkbox" id="nav-6-1-1-3-18">
    
    <label class="md-nav__link" for="nav-6-1-1-3-18">
      18. emoji
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-6-1-1-3-18">
        18. emoji
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/emoji_main/" title="18.1. 介绍" class="md-nav__link">
      18.1. 介绍
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/emoji_principle/" title="18.2. 工作原理" class="md-nav__link">
      18.2. 工作原理
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/emoji_usage/" title="18.3. 最佳实践" class="md-nav__link">
      18.3. 最佳实践
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/symbol/" title="19. 特殊符号" class="md-nav__link">
      19. 特殊符号
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-1-1-3-20" type="checkbox" id="nav-6-1-1-3-20">
    
    <label class="md-nav__link" for="nav-6-1-1-3-20">
      20. 嵌套
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-6-1-1-3-20">
        20. 嵌套
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/nest_main/" title="20.1. 介绍" class="md-nav__link">
      20.1. 介绍
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/nest_note_note/" title="20.2. 注解-注解" class="md-nav__link">
      20.2. 注解-注解
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/nest_list_list/" title="20.3. 列表-列表" class="md-nav__link">
      20.3. 列表-列表
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/nest_quote_quote/" title="20.4. 引用-引用" class="md-nav__link">
      20.4. 引用-引用
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/nest_note_code/" title="20.5. 注解-代码块" class="md-nav__link">
      20.5. 注解-代码块
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/nest_list_code/" title="20.6. 列表-代码块" class="md-nav__link">
      20.6. 列表-代码块
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/nest_quote_code/" title="20.7. 引用-代码块" class="md-nav__link">
      20.7. 引用-代码块
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/nest_yellow_code/" title="20.8. 黄色区块-代码" class="md-nav__link">
      20.8. 黄色区块-代码
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/nest_green_code/" title="20.9. 绿色区块-代码" class="md-nav__link">
      20.9. 绿色区块-代码
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/nest_red_code/" title="20.10. 红色区块-代码" class="md-nav__link">
      20.10. 红色区块-代码
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/nest_greenred_code/" title="20.11. 绿接红区块-代码" class="md-nav__link">
      20.11. 绿接红区块-代码
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/nest_note_list_quote/" title="20.12. 注解-列表-引用" class="md-nav__link">
      20.12. 注解-列表-引用
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/nest_list_list_quote/" title="20.13. 列表-列表-引用" class="md-nav__link">
      20.13. 列表-列表-引用
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../syntax/nest_quote_quote_code/" title="20.14. 引用-引用-代码" class="md-nav__link">
      20.14. 引用-引用-代码
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-1-1-4" type="checkbox" id="nav-6-1-1-4">
    
    <label class="md-nav__link" for="nav-6-1-1-4">
      四. 附录
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-6-1-1-4">
        四. 附录
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../appendix/pygments/" title="1. 支持代码高亮的语言" class="md-nav__link">
      1. 支持代码高亮的语言
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../appendix/emoji_shortname/" title="2. emojione全名短名映射表" class="md-nav__link">
      2. emojione全名短名映射表
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../appendix/baidu_tongji/" title="3. 添加百度统计" class="md-nav__link">
      3. 添加百度统计
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../appendix/color/" title="4. 配色" class="md-nav__link">
      4. 配色
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../appendix/module/" title="5. 模块介绍" class="md-nav__link">
      5. 模块介绍
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../appendix/level/" title="6. mkdocs层级关系" class="md-nav__link">
      6. mkdocs层级关系
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../appendix/search/" title="7. 支持中文搜索" class="md-nav__link">
      7. 支持中文搜索
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../appendix/yml/" title="8. mkdocs.yml范例" class="md-nav__link">
      8. mkdocs.yml范例
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../recommend/" title="五. 使用建议" class="md-nav__link">
      五. 使用建议
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../contact/" title="六. 联系方式" class="md-nav__link">
      六. 联系方式
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1" title="1. 介绍" class="md-nav__link">
    1. 介绍
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11" title="1.1 优势" class="md-nav__link">
    1.1 优势
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12" title="1.2 比较" class="md-nav__link">
    1.2 比较
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-redis-sentinel" title="2. redis sentinel 介绍" class="md-nav__link">
    2. redis sentinel 介绍
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-sentinel" title="2.1 Sentinel是什么" class="md-nav__link">
    2.1 Sentinel是什么
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-sentinel" title="2.2 开多少个Sentinel合适" class="md-nav__link">
    2.2 开多少个Sentinel合适
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-sentinelmaster" title="2.3 Sentinel判断master下线的两种标准" class="md-nav__link">
    2.3 Sentinel判断master下线的两种标准
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" title="3. 准备" class="md-nav__link">
    3. 准备
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" title="3.1 条件" class="md-nav__link">
    3.1 条件
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32" title="3.2 配置" class="md-nav__link">
    3.2 配置
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#321-ip" title="3.2.1 ip地址" class="md-nav__link">
    3.2.1 ip地址
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#322" title="3.2.2 下线阀值" class="md-nav__link">
    3.2.2 下线阀值
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#323-slave" title="3.2.3 slave个数" class="md-nav__link">
    3.2.3 slave个数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#323" title="3.2.3 恢复时长" class="md-nav__link">
    3.2.3 恢复时长
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-redis-sentinel" title="4. redis sentinel" class="md-nav__link">
    4. redis sentinel
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41" title="4.1 环境准备" class="md-nav__link">
    4.1 环境准备
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42" title="4.2 操作流程" class="md-nav__link">
    4.2 操作流程
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43" title="4.3 拓扑演变" class="md-nav__link">
    4.3 拓扑演变
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#431" title="4.3.1 开始模式" class="md-nav__link">
    4.3.1 开始模式
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#432-master" title="4.3.2 master宕机" class="md-nav__link">
    4.3.2 master宕机
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#433-master" title="4.3.3 master修复后" class="md-nav__link">
    4.3.3 master修复后
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44" title="4.4 启动镜像" class="md-nav__link">
    4.4 启动镜像
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#452-tcl" title="4.5.2 安装tcl 包" class="md-nav__link">
    4.5.2 安装tcl 包
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#453-redis" title="4.5.3 安装redis" class="md-nav__link">
    4.5.3 安装redis
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#46" title="4.6 配置主从" class="md-nav__link">
    4.6 配置主从
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#461" title="4.6.1 主从配置" class="md-nav__link">
    4.6.1 主从配置
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#47" title="4.7 启动" class="md-nav__link">
    4.7 启动
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#471" title="4.7.1 启动" class="md-nav__link">
    4.7.1 启动
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#472" title="4.7.2 停止" class="md-nav__link">
    4.7.2 停止
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#48" title="4.8 测试主从" class="md-nav__link">
    4.8 测试主从
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#481" title="4.8.1 主上设置一个键值对" class="md-nav__link">
    4.8.1 主上设置一个键值对
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#482-redis-slave1" title="4.8.2 Redis slave1查看" class="md-nav__link">
    4.8.2 Redis slave1查看
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#482-redis-slave2" title="4.8.2 Redis slave2查看" class="md-nav__link">
    4.8.2 Redis slave2查看
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#48-sentinel" title="4.8 配置sentinel" class="md-nav__link">
    4.8 配置sentinel
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#481-sentinel" title="4.8.1 配置sentinel" class="md-nav__link">
    4.8.1 配置sentinel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#482-sentinel" title="4.8.2 启动 sentinel" class="md-nav__link">
    4.8.2 启动 sentinel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#483" title="4.8.3 查看" class="md-nav__link">
    4.8.3 查看
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#49" title="4.9 故障模拟" class="md-nav__link">
    4.9 故障模拟
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#491-master" title="4.9.1 master宕机" class="md-nav__link">
    4.9.1 master宕机
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#492-redis" title="4.9.2 查看redis主从情况" class="md-nav__link">
    4.9.2 查看redis主从情况
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#493-sentinel" title="4.9.3 查看sentinel情况" class="md-nav__link">
    4.9.3 查看sentinel情况
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/caimengzhi/books/edit/master/docs/linux/server/redis/redis-sentinel.md" title="编辑此页" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>1. redis-sentinel</h1>
                
                <p><center>Redis Sentinel</center></p>
<h2 id="1">1. 介绍<a class="headerlink" href="#1" title="Permanent link">&para;</a></h2>
<p>&#160; &#160; &#160; &#160;REmote DIctionary Server(Redis) 是一个由Salvatore Sanfilippo写的key-value存储系统。Redis是一个开源的使用ANSI C语言编写、遵守BSD协议、支持网络、可基于内存亦可持久化的日志型、Key-Value数据库，并提供多种语言的API。它通常被称为数据结构服务器，因为值（value）可以是 字符串(String), 哈希(Map), 列表(list), 集合(sets) 和 有序集合(sorted sets)等类型。Redis 是完全开源免费的，遵守BSD协议，是一个高性能的key-value数据库。Redis 与其他 key - value 缓存产品有以下三个特点：</p>
<ul>
<li>Redis支持数据的持久化，可以将内存中的数据保持在磁盘中，重启的时候可以再次加载进行使用。</li>
<li>Redis不仅仅支持简单的key-value类型的数据，同时还提供list，set，zset，hash等数据结构的存储。</li>
<li>Redis支持数据的备份，即master-slave模式的数据备份。</li>
</ul>
<h3 id="11">1.1 优势<a class="headerlink" href="#11" title="Permanent link">&para;</a></h3>
<ul>
<li>性能极高 – Redis能读的速度是110000次/s,写的速度是81000次/s 。</li>
<li>丰富的数据类型–Redis支持二进制案例的 Strings, Lists, Hashes, Sets 及 Ordered Sets 数据类型操作。</li>
<li>原子 – Redis的所有操作都是原子性的，同时Redis还支持对几个操作全并后的原子性执行。</li>
<li>丰富的特性 – Redis还支持 publish/subscribe, 通知, key 过期等等特性。</li>
</ul>
<h3 id="12">1.2 比较<a class="headerlink" href="#12" title="Permanent link">&para;</a></h3>
<p>&#160; &#160; &#160; &#160;Redis与其他key-value存储有什么不同
- Redis有着更为复杂的数据结构并且提供对他们的原子性操作，这是一个不同于其他数据库的进化路径。Redis的数据类型都是基于基本数据结构的同时对程序员透明，无需进行额外的抽象。
- Redis运行在内存中但是可以持久化到磁盘，所以在对不同数据集进行高速读写时需要权衡内存，应为数据量不能大于硬件内存。在内存数据库方面的另一个优点是， 相比在磁盘上相同的复杂的数据结构，在内存中操作起来非常简单，这样Redis可以做很多内部复杂性很强的事情。 同时，在磁盘格式方面他们是紧凑的以追加的方式产生的，因为他们并不需要进行随机访问。</p>
<h2 id="2-redis-sentinel">2. redis sentinel 介绍<a class="headerlink" href="#2-redis-sentinel" title="Permanent link">&para;</a></h2>
<h3 id="21-sentinel">2.1 Sentinel是什么<a class="headerlink" href="#21-sentinel" title="Permanent link">&para;</a></h3>
<p>&#160; &#160; &#160; &#160;用于监视master是否正常在线，若果说master挂掉了，Sentinel会让其中一个slave顶上去。</p>
<h3 id="22-sentinel">2.2 开多少个Sentinel合适<a class="headerlink" href="#22-sentinel" title="Permanent link">&para;</a></h3>
<p>&#160; &#160; &#160; &#160;开3个Sentinel，或者说开奇数个，Sentinel的原理就是一直监视着master是否在线，如果是挂掉，Sentinel的集群追选举其中一个领头Sentinel，然后由于领头的Sentinel执行slaveof命令让slave作为master，然后Sentinel集群机选监视新的master，老的master还是会一直监视着如果启动了那么老的master会做为新的master的slave</p>
<h3 id="23-sentinelmaster">2.3 Sentinel判断master下线的两种标准<a class="headerlink" href="#23-sentinelmaster" title="Permanent link">&para;</a></h3>
<ul>
<li>主观下线  </li>
</ul>
<p>&#160; &#160; &#160; &#160; Sentinel发现master没有在指定时间返回信息，这种情况呗认为主观下线。[指定时间：这个时间是我们设置的]</p>
<ul>
<li>客观下线</li>
</ul>
<p>&#160; &#160; &#160; &#160; sentinel询问Sentinel集群，篮下其他的Sentinel是否也标记这个master是否下线如果标记Sentinel下线的个数达到一个阈值，Sentinel会将master标记为主观下线，这时候会选取领头的Sentinel，由Sentinel选取master下面的一个slave去作为新的master。</p>
<h2 id="3">3. 准备<a class="headerlink" href="#3" title="Permanent link">&para;</a></h2>
<h3 id="31">3.1 条件<a class="headerlink" href="#31" title="Permanent link">&para;</a></h3>
<p>&#160; &#160; &#160; &#160; 实验环境: 1主两从，3个Sentinel</p>
<h3 id="32">3.2 配置<a class="headerlink" href="#32" title="Permanent link">&para;</a></h3>
<p>&#160; &#160; &#160; &#160; 设置Sentinel四个条件:</p>
<ul>
<li>IP</li>
<li>下线阀值</li>
<li>slave个数</li>
<li>恢复时长</li>
</ul>
<h4 id="321-ip">3.2.1 ip地址<a class="headerlink" href="#321-ip" title="Permanent link">&para;</a></h4>
<p>&#160; &#160; &#160; &#160; 你要监视主服务器的ip地址，以及设置Sentinel标记客观下线的阈值</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<div class="codehilite"><pre><span></span><span class="n">sentinel</span> <span class="n">monitor</span> <span class="o">&lt;</span><span class="err">被监控的名字也就是</span><span class="n">run_id</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">ip</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">port</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="err">团体号</span><span class="o">&gt;</span>    
<span class="n">sentinel</span> <span class="n">monitor</span> <span class="n">mymaster</span> <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span> <span class="mi">6379</span> <span class="mi">2</span>
</pre></div>

</div>
<h4 id="322">3.2.2 下线阀值<a class="headerlink" href="#322" title="Permanent link">&para;</a></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<div class="codehilite"><pre><span></span><span class="n">Sentinel认为主观下线的一个阈值</span>
<span class="n">sentinel</span> <span class="n">down</span><span class="o">-</span><span class="n">after</span><span class="o">-</span><span class="n">milliseconds</span> <span class="n">mymaster</span> <span class="mi">30000</span>
</pre></div>

</div>
<h4 id="323-slave">3.2.3 slave个数<a class="headerlink" href="#323-slave" title="Permanent link">&para;</a></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<div class="codehilite"><pre><span></span><span class="err">故障恢复期间可以同时</span><span class="n">slave的个数</span>
<span class="n">sentinel</span> <span class="n">parallel</span><span class="o">-</span><span class="n">syncs</span> <span class="n">mymaster</span> <span class="mi">1</span>
</pre></div>

</div>
<h4 id="323">3.2.3 恢复时长<a class="headerlink" href="#323" title="Permanent link">&para;</a></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<div class="codehilite"><pre><span></span><span class="err">故障恢复允许的最大时长</span>
<span class="n">sentinel</span> <span class="n">failover</span><span class="o">-</span><span class="n">timeout</span> <span class="n">mymaster</span> <span class="mi">180000</span>  
</pre></div>

</div>
<h2 id="4-redis-sentinel">4. redis sentinel<a class="headerlink" href="#4-redis-sentinel" title="Permanent link">&para;</a></h2>
<h3 id="41">4.1 环境准备<a class="headerlink" href="#41" title="Permanent link">&para;</a></h3>
<p>&#160; &#160; &#160; &#160; 采用同一网络内的三台docker主机（可以是物理主机、虚拟机或docker容器），要求三台主机之间都能相互访问，每一台主机上都安装redis-server、redis-sentinel。redis-server负责提供Redis缓存服务，三台主机间的关系是master-slave-slave,redis-sentinel负责提供Redis高可用，VIP始终在redis-server master上，保证对上层应用可写可读。三台主机的冗余度是1，也就是说当有一台主机宕机时另外两台中至少有一台主机可以提供Redis缓存服务。</p>
<p><img alt="redis-sentinel原理" src="../../../../pictures/linux/redis/redis-sentinel/p1.png" /></p>
<p>如图所示，有三台主机，分别标识为Redis1、Redis2、Redis3，它们的角色和配置等信息如下：</p>
<table>
<thead>
<tr>
<th>主机标识</th>
<th>IP地址</th>
<th>预设角色</th>
</tr>
</thead>
<tbody>
<tr>
<td>172.17.0.6</td>
<td>redis-server redis-sentinel</td>
<td>vip</td>
</tr>
<tr>
<td>172.17.0.14</td>
<td>redis-server redis-sentinel</td>
<td></td>
</tr>
<tr>
<td>172.17.0.16</td>
<td>redis-server redis-sentinel</td>
<td></td>
</tr>
</tbody>
</table>
<p>&#160; &#160; &#160; &#160; Redis主从系统，除了做数据冗余，开可以做高可用性灾备。Reids提供了Sentinel工具来监控各Master的状态，如果Master异常，则会做主从切换，将slave作为master，将master作为slave。主从切换之后，master_redis.conf、slave_redis.conf和sentinel.conf的内容都会发生改变。master_redis.conf中会多了一句slaveof的配置，sentinel.conf的监控目标也随之调换，这一点要注意。</p>
<h3 id="42">4.2 操作流程<a class="headerlink" href="#42" title="Permanent link">&para;</a></h3>
<p>&#160; &#160; &#160; &#160; 整体流程如下几个步骤，以下我使用docker安装，宿主机类似。
- 启动三台ubuntu12.04 64位镜像作为docker容器
- 安装依赖包
- 安装tcl8.6.1
- 安装redis3.0.2
- 配置redis一主两从模式
- 测试redis一主两从
- 配置sentinel监控
- 测试sentinel监控模式
- 启动redis程序
- 启动sentinel监控程序
- 测试及排错</p>
<h3 id="43">4.3 拓扑演变<a class="headerlink" href="#43" title="Permanent link">&para;</a></h3>
<h4 id="431">4.3.1 开始模式<a class="headerlink" href="#431" title="Permanent link">&para;</a></h4>
<p><img alt="redis-sentinel 开始架构图" src="../../../../pictures/linux/redis/redis-sentinel/p2.png" /></p>
<p>&#160; &#160; &#160; &#160; 开始的三个sentinel监控一个redis的主。当redis主宕机以后，架构图又变了模式。</p>
<h4 id="432-master">4.3.2 master宕机<a class="headerlink" href="#432-master" title="Permanent link">&para;</a></h4>
<p>&#160; &#160; &#160; &#160; Master redis宕机后，新主启动，在master redis在指定时间没有响应，三个sentinel仲裁有两人认为下线此时仲裁处新主redis，启动新的master redis后，sentinel同时监控老的master redis。</p>
<p><img alt="redis-sentinel master宕机开始架构图" src="../../../../pictures/linux/redis/redis-sentinel/p3.png" /></p>
<h4 id="433-master">4.3.3 master修复后<a class="headerlink" href="#433-master" title="Permanent link">&para;</a></h4>
<p>&#160; &#160; &#160; &#160; 当原来的master redis恢复后，此时原来的主就自动变成从去自动同步新的主，架构模式恢复成以下。</p>
<p><img alt="redis-sentinel master恢复架构图" src="../../../../pictures/linux/redis/redis-sentinel/p4.png" /></p>
<h3 id="44">4.4 启动镜像<a class="headerlink" href="#44" title="Permanent link">&para;</a></h3>
<p>启动镜像
<div class="codehilite"><pre><span></span>root@leco:~# docker run -itd --privileged -p 36379:6379 -p 36380:26379 -v /usr/local/src/ sentienl1  bash 
root@leco:~# docker run -itd --privileged -p 36381:6379 -p 36382:26379 -v /usr/local/src/ sentienl2  bash 
root@leco:~# docker run -itd --privileged -p 36383:6379 -p 36384:26379 -v /usr/local/src/ sentienl3  bash  
</pre></div></p>
<details class="note 参数解释"><summary>Note</summary><div class="codehilite"><pre><span></span><span class="err">此时端口映射出</span><span class="n">redis的端口6379和sentinel的端口26379到宿主机</span><span class="err">。</span>
<span class="o">--</span><span class="n">privileged</span> <span class="err">是获取至高无上的</span><span class="n">root权限</span><span class="err">。</span> 
<span class="o">-</span><span class="n">v是数据卷管理</span><span class="err">。</span>
<span class="o">-</span><span class="n">d是后台方式运行</span><span class="err">，为了在容器内</span><span class="n">exit后容器不退出</span><span class="err">。</span>
</pre></div>

</details>
<details class="note"><summary>注意</summary><div class="codehilite"><pre><span></span><span class="err">我只列出安装了其中一个</span><span class="n">docker里面的依赖包其他两docker安装一样</span><span class="err">。目的是利于测试，最后可以卸载在制作成新的镜像时候。</span>
</pre></div>

</details>
<h4 id="452-tcl">4.5.2 安装tcl 包<a class="headerlink" href="#452-tcl" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>root@8d7240ab9c47:~# tar xzvf tcl8.6.1-src.tar.gz  -C /usr/local/
root@8d7240ab9c47:~# cd /usr/local/tcl8.6.1/unix
root@8d7240ab9c47:~# ./configure
root@8d7240ab9c47:~# make
root@8d7240ab9c47:~# make install
</pre></div>

<h4 id="453-redis">4.5.3 安装redis<a class="headerlink" href="#453-redis" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>root@8d7240ab9c47:~# tar xvfz redis-3.0.2.tar.gz
root@8d7240ab9c47:~# cd redis-3.0.2
root@8d7240ab9c47:~# make
root@8d7240ab9c47:~# cd src
root@8d7240ab9c47:~# make install 
root@8d7240ab9c47:~# make PREFIX=/usr/local/redis install 
root@8d7240ab9c47:~# useradd -s /sbin/nologin redis
root@8d7240ab9c47:~# mkdir /usr/local/redis/var
root@8d7240ab9c47:~# chmod 777 /usr/local/redis/var/
root@8d7240ab9c47:~# mkdir -p /usr/local/redis/etc           #放置配置文件地方
</pre></div>

<details class="info"><summary>注意</summary><div class="codehilite"><pre><span></span><span class="err">我只列出安装了其中一个</span><span class="n">docker里面的redis</span><span class="p">,</span><span class="n">tcl</span><span class="err">，此时先做为主，其他两从</span><span class="n">redis</span> <span class="n">docker安装一样</span><span class="err">。</span>
</pre></div>

</details>
<h3 id="46">4.6 配置主从<a class="headerlink" href="#46" title="Permanent link">&para;</a></h3>
<h4 id="461">4.6.1 主从配置<a class="headerlink" href="#461" title="Permanent link">&para;</a></h4>
<ul>
<li>Master redis.conf配置文件修改</li>
</ul>
<div class="codehilite"><pre><span></span>root@8d7240ab9c47:~# cat /usr/local/redis/etc/redis.conf
daemonize yes                             # 后台运行
pidfile &quot;/usr/local/redis/var/redis.pid&quot;  # 运行pid文件
port 6379                                 # 端口
timeout 300                               # 超时
loglevel debug                            # debug模式
logfile &quot;/usr/local/redis/var/redis.log&quot;  # 日志文件
databases 16
save 900 1
save 300 10
save 60 10000
rdbcompression yes
dbfilename &quot;dump.rdb&quot;
dir &quot;/usr/local/redis/var&quot;
appendonly no
appendfsync always
bind 0.0.0.0                              # 方式ip限制
</pre></div>

<ul>
<li>Slave1  redis.conf配置文件修改</li>
</ul>
<div class="codehilite"><pre><span></span>root@38b072848ccd:/# cat /usr/local/redis/etc/redis.conf
daemonize yes
pidfile &quot;/usr/local/redis/var/redis.pid&quot;
port 6379
timeout 300
loglevel debug
logfile &quot;/usr/local/redis/var/redis.log&quot;
databases 16
save 900 1
save 300 10
save 60 10000
rdbcompression yes
dbfilename &quot;dump.rdb&quot;
dir &quot;/usr/local/redis/var&quot;
appendonly no
appendfsync always
bind 0.0.0.0
slaveof 172.17.0.2 6379                  # master ip
</pre></div>

<ul>
<li>Slave2  redis.conf配置文件修改</li>
</ul>
<div class="codehilite"><pre><span></span>root@56c0344c59a0:/# cat /usr/local/redis/etc/redis.conf
daemonize yes
pidfile &quot;/usr/local/redis/var/redis.pid&quot;
port 6379
timeout 300
loglevel debug
logfile &quot;/usr/local/redis/var/redis.log&quot;
databases 16
save 900 1
save 300 10
save 60 10000
rdbcompression yes
dbfilename &quot;dump.rdb&quot;
dir &quot;/usr/local/redis/var&quot;
appendonly no
appendfsync always
bind 0.0.0.0
slaveof 172.17.0.2 6379
</pre></div>

<details class="note"><summary>特别注意</summary><div class="codehilite"><pre><span></span>    <span class="err">一定要修这个为</span><span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="err">否则宿主机连接不到</span><span class="n">docker容器里面的redis</span>
</pre></div>

</details>
<ul>
<li>启动脚本</li>
</ul>
<div class="codehilite"><pre><span></span>[root@linux-node2 init.d]# cat /etc/init.d/redis 
#!/bin/sh
#
# Simple Redis init.d script conceived to work on Linux systems
# as it does use of the /proc filesystem.
# chkconfig:   2345 90 10
# description:  Redis is a persistent key-value database
#

REDISPORT=6379
EXEC=/usr/local/bin/redis-server
CLIEXEC=/usr/local/bin/redis-cli

PIDFILE=/var/run/redis_${REDISPORT}.pid
#CONF=&quot;/etc/redis/${REDISPORT}.conf&quot;
CONF=&quot;/usr/local/redis/etc/redis.conf&quot;

case &quot;$1&quot; in
    start)
        if [ -f $PIDFILE ]
        then
                echo &quot;$PIDFILE exists, process is already running or crashed&quot;
        else
                echo &quot;Starting Redis server...&quot;
                $EXEC $CONF
                echo $(ps aux|grep redis|grep -v grep|grep 6379|awk &#39;{print $2}&#39;)&gt;$PIDFILE
        fi
        ;;
    stop)
        if [ ! -f $PIDFILE ]
        then
                echo &quot;$PIDFILE does not exist, process is not running&quot;
        else
                PID=$(cat $PIDFILE)
                echo &quot;Stopping ...&quot;
                $CLIEXEC -p $REDISPORT shutdown
                while [ -x /proc/${PID} ]
                do
                    echo &quot;Waiting for Redis to shutdown ...&quot;
                    sleep 1
                done
                echo &quot;Redis stopped&quot;
                cd /var/run/ &amp;&amp; rm -f redis_${REDISPORT}.pid
        fi
        ;;
    *)
        echo &quot;Please use start or stop as first argument&quot;
        ;;
esac
[root@linux-node2 init.d]# chmod +x /etc/init.d/redis 
</pre></div>

<h3 id="47">4.7 启动<a class="headerlink" href="#47" title="Permanent link">&para;</a></h3>
<h4 id="471">4.7.1 启动<a class="headerlink" href="#471" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>#root@8d7240ab9c47:~# redis-server /usr/local/redis/etc/redis.conf
root@8d7240ab9c47:~#  /etc/init.d/redis start
Starting Redis server...
</pre></div>

<h4 id="472">4.7.2 停止<a class="headerlink" href="#472" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>#root@8d7240ab9c47:~# redis-cli shutdown
root@8d7240ab9c47:~#  /etc/init.d/redis stop
</pre></div>

<details class="note"><summary>注意</summary><div class="codehilite"><pre><span></span> <span class="err">其他两个从</span><span class="n">redis启动方式一样</span><span class="err">。</span>
</pre></div>

</details>
<h3 id="48">4.8 测试主从<a class="headerlink" href="#48" title="Permanent link">&para;</a></h3>
<p>&#160; &#160; &#160; &#160;保证三台redis都启动后，查看</p>
<p><div class="codehilite"><pre><span></span>127.0.0.1:6379&gt; info
。。。。。。
# Replication
role:master
connected_slaves:2
slave0:ip=172.17.0.6,port=6379,state=online,offset=10912,lag=0
slave1:ip=172.17.0.4,port=6379,state=online,offset=10912,lag=0
。。。。。。
</pre></div>
每个redis都会有该info，可看出其中每个redis的身份role。其中master可以看出它的两个slave情况。</p>
<h4 id="481">4.8.1 主上设置一个键值对<a class="headerlink" href="#481" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>127.0.0.1:6379&gt; set realcloud 1234
OK
127.0.0.1:6379&gt; get realcloud
&quot;1234&quot;
</pre></div>

<h4 id="482-redis-slave1">4.8.2 Redis slave1查看<a class="headerlink" href="#482-redis-slave1" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>127.0.0.1:6379&gt; get realcloud
&quot;1234&quot;
</pre></div>

<h4 id="482-redis-slave2">4.8.2 Redis slave2查看<a class="headerlink" href="#482-redis-slave2" title="Permanent link">&para;</a></h4>
<p><div class="codehilite"><pre><span></span>127.0.0.1:6379&gt; get realcloud
&quot;1234&quot;
</pre></div>
从上可以看出redis一主两从，安装，测试OK。</p>
<h3 id="48-sentinel">4.8 配置sentinel<a class="headerlink" href="#48-sentinel" title="Permanent link">&para;</a></h3>
<p>&#160; &#160; &#160; &#160;三台机器的配置文件都一样。</p>
<h4 id="481-sentinel">4.8.1 配置sentinel<a class="headerlink" href="#481-sentinel" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>root@8d7240ab9c47:~# cat /usr/local/redis/etc/sentinel.conf
port 26379
dir /usr/local/redis/var_sentinel
sentinel monitor mymaster 172.17.0.2 6379 2        #该IP是redis主的IP。根据情况改写。
sentinel down-after-milliseconds mymaster 10000
sentinel parallel-syncs mymaster 1
sentinel failover-timeout mymaster 60000
#sentinel client-reconfig-script mymaster /script/failover.sh
</pre></div>

<h4 id="482-sentinel">4.8.2 启动 sentinel<a class="headerlink" href="#482-sentinel" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>root@8d7240ab9c47:~#mkdir /usr/local/redis/var_sentinel
root@8d7240ab9c47:~# 
redis-sentinel  /usr/local/redis/etc/sentinel.conf &gt;/usr/local/redis/var_sentinel/sentinel.log &amp; 
</pre></div>

<h4 id="483">4.8.3 查看<a class="headerlink" href="#483" title="Permanent link">&para;</a></h4>
<p>&#160; &#160; &#160; &#160;在主redis上进入sentinel。</p>
<div class="codehilite"><pre><span></span>root@8d7240ab9c47:~# redis-cli -p 26379
127.0.0.1:26379&gt;  sentinel master mymaster
 1) &quot;name&quot;
 2) &quot;mymaster&quot;
 3) &quot;ip&quot;
 4) &quot;172.17.0.2&quot;
 5) &quot;port&quot;
 6) &quot;6379&quot;
 7) &quot;runid&quot;
 8) &quot;eb05e2906f6e3f916fbca5f3f3e421560f2bbf21&quot;
 9) &quot;flags&quot;
10) &quot;master&quot;
11) &quot;pending-commands&quot;
12) &quot;0&quot;
13) &quot;last-ping-sent&quot;
14) &quot;0&quot;
15) &quot;last-ok-ping-reply&quot;
16) &quot;451&quot;
17) &quot;last-ping-reply&quot;
18) &quot;451&quot;
19) &quot;down-after-milliseconds&quot;
20) &quot;10000&quot;
21) &quot;info-refresh&quot;
22) &quot;3492&quot;
23) &quot;role-reported&quot;
24) &quot;master&quot;
25) &quot;role-reported-time&quot;
26) &quot;5854962&quot;
27) &quot;config-epoch&quot;
28) &quot;0&quot;
29) &quot;num-slaves&quot;
30) &quot;2&quot;
31) &quot;num-other-sentinels&quot;
32) &quot;2&quot;
33) &quot;quorum&quot;
34) &quot;2&quot;
35) &quot;failover-timeout&quot;
36) &quot;60000&quot;
37) &quot;parallel-syncs&quot;
38) &quot;1&quot;
127.0.0.1:26379&gt;
</pre></div>

<details class="note"><summary>注意</summary><div class="codehilite"><pre><span></span><span class="n">redis的默认端口是6379</span>
<span class="n">redis</span><span class="o">-</span><span class="n">sentinel</span> <span class="err">默认端口是</span><span class="mi">26379</span>
</pre></div>

</details>
<h3 id="49">4.9 故障模拟<a class="headerlink" href="#49" title="Permanent link">&para;</a></h3>
<h4 id="491-master">4.9.1 master宕机<a class="headerlink" href="#491-master" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>root@8d7240ab9c47:~# redis-cli shutdown #主宕机
</pre></div>

<h4 id="492-redis">4.9.2 查看redis主从情况<a class="headerlink" href="#492-redis" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>root@38b072848ccd:~# redis-cli info #此时为master
root@56c0344c59a0:~# redis-cli info
</pre></div>

<h4 id="493-sentinel">4.9.3 查看sentinel情况<a class="headerlink" href="#493-sentinel" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>root@38b072848ccd:~# redis-cli -p 26379
127.0.0.1:26379&gt;  sentinel master mymaster
 1) &quot;name&quot;
 2) &quot;mymaster&quot;
 3) &quot;ip&quot;
 4) &quot;172.17.0.4&quot;
 5) &quot;port&quot;
 6) &quot;6379&quot;
</pre></div>

<p>&#160; &#160; &#160; &#160;此时在kill当前的master。Sentinel在指定时间内又众筹出当前新的master。当之前的master 又启动好以后sentinel又主动将之前的master添加到新的master中，作为slave。目前为止redis的sentinel测试OK。</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../../../tools/gitlab/3.set_root_pwd/" title="3. 找回root密码" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  后退
                </span>
                3. 找回root密码
              </span>
            </div>
          </a>
        
        
          <a href="../../../../course/" title="教程" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  前进
                </span>
                教程
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/caimengzhi" class="md-footer-social__link fa fa-github"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../../assets/javascripts/application.a353778b.js"></script>
      
        
        
          
          <script src="../../../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
                <script src="../../../../assets/javascripts/lunr/tinyseg.js"></script>
              
              
                <script src="../../../../assets/javascripts/lunr/lunr.jp.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../../.."}})</script>
      
        <script src="../../../../js/extra.js"></script>
      
        <script src="../../../../js/baidu-tongji.js"></script>
      
        <script src="../../../../js/webfont.js"></script>
      
        <script src="../../../../js/snap.svg-min.js"></script>
      
        <script src="../../../../js/underscore-min.js"></script>
      
        <script src="../../../../js/sequence-diagram-min.js"></script>
      
        <script src="../../../../js/uml-converter.js"></script>
      
        <script src="../../../../js/sequence-loader.js"></script>
      
    
  </body>
</html>